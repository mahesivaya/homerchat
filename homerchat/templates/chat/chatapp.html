{% extends "base.html" %}
{% load static %}

{% block title %}HomerChat{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/chatapp.css' %}">
{% endblock %}

{% block content %}

<script>
    window.CHAT_USERNAME = "{{ request.user.username }}";
</script>

<div class="chat-container">

    <!-- ===================== SIDEBAR ===================== -->
    <aside class="sidebar">

        <div class="sidebar-section">
            <h3>Create Room</h3>
            <div class="room-create">
                <input id="new-room-name" type="text" placeholder="Room name">
                <button id="create-room-btn">+</button>
            </div>
        </div>

        <div class="sidebar-section">
            <h3>Rooms</h3>
            <input id="room-search" type="text" class="search-input" placeholder="Search rooms...">
            <div id="room-list" class="item-list"></div>
        </div>

        <div class="sidebar-section">
            <h3>Users</h3>
            <input id="user-search" type="text" class="search-input" placeholder="Search users...">
            <div id="user-list" class="item-list"></div>
        </div>

    </aside>


    <!-- ===================== CHAT PANEL ===================== -->
    <main class="chat-panel">

        <header class="chat-header">
            <h2 id="chat-header-title">Welcome to HomerChat</h2>
        </header>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="center-message">
            ðŸ‘‹ Select a room to join or click a user to start a direct chat.
        </div>

        <!-- Join Banner -->
        <div id="join-banner" class="join-banner hidden">
            <button id="join-room-btn">Join Room</button>
        </div>

        <!-- Chat Log -->
        <div id="chat-log" class="chat-log hidden"></div>

        <!-- Input -->
        <footer id="chat-input-row" class="chat-input-row hidden">
            <input id="chat-message-input" type="text" placeholder="Type a message...">
            <button id="chat-message-submit">Send</button>
        </footer>

    </main>


    <!-- ===================== ROOM INFO PANEL ===================== -->
    <aside id="room-info-panel" class="room-info hidden">
        <div class="room-info-header">
            <h3>Room Info</h3>
            <button id="close-info-btn" class="close-btn">âœ•</button>
        </div>

        <p><b>Created By:</b> <span id="room-created-by"></span></p>

        <p><b>Members:</b></p>
        <ul id="room-users"></ul>

        <div id="room-info-actions"></div>
    </aside>

</div>

<script src="{% static 'js/chatapp.js' %}"></script>

{% endblock %}

